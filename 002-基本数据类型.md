# 第二章 基本数据类型

在 [第一章 入门](./001-入门.md) 中我们学习了 C 语言的基本构成要素。其中，最基本的要素就是 **对象**，即 **表示值的一块存储区域**。更准确的说，**执行环境中数据存储区域，其内容可用于表示值**。此外，**对象在被引用时，具有特定的类型**

![1769615781279.png](https://fastly.jsdelivr.net/gh/duyupeng36/images@master/2026-01/1769615781317.png)

对象通过 **名字** 进行引用，通过名字可以访问对象的值，以及修改对象的值。要使用名字引用对象，就必须先 **声明** 这个名字。声明时需要提供名字的 **类型**，这个类型告诉我们对象的值时什么种类的。例如，`int` 类型的对象包含的是整数值

> [!tip]
> 
> 类型的重要之处在于，如果将表示某一种对象类型的位模式按照另一种对象类型来解释，则可能产生不同的值

例如，数值 $1$，在 IEEE 754 单精度浮点数中是按照位模式 $(3f800000)_{16}$ 表示的。如果将这个位模式解释为整数，那么得到的结果是 $1\ 065\ 353\ 216$。

**变量** 就是对象的一个类型，本质上变量就是一个命名的内存块。既然变量是一个对象，那么变量就应该具有类型。现在，我们来学习各种类型变量的使用

## 2.1 整型变量

下面的语句定义了一个整型变量

```c
int apple_count;
```

这个语句定义了一个 `int` 类型的变量 `apple_count`，该变量包含某个随机的垃圾值。在定义变量时，可以而且应该指定初始值，如下所示

```c
int apple_count = 15;
```

类型 `int` 的大小一般为 $32$ 位，可以存储 $-2147483648 \sim 2147483647$。这可以覆盖大多数使用整数的情形，所以 `int` 类型是最常用的类型。

下面语句定义了 $3$ 个 `int` 类型的变量

```c
int apple_count = 15;
int orange_count = 5;
int total_fruit = apple_count + orange_count;
```

C 语言允许在一个语句中定义和初始化给定类型的多个变量。例如

```c
int foot_count = 2, toe_count = 10, head_count = 1;
```

但是，不建议这样定义变量，最好是一个语句定义一个变量。这样会提高程序的可读性，还可以注释每个变量的用途

例如，下面的示例程序将整型变量的值写入标准输出

```c title="ex2_01.c"
/**
 * ex02_01.c - Writing the value of an integer variable to standard output
 */

#include <stdio.h>

int main(void)
{
    int apple_count = 15;
    int orange_count = 5;
    int total_fruit = apple_count + orange_count;

    printf("The value of apple_count is %d\n", apple_count);
    printf("The value of orange_count is %d\n", orange_count);
    printf("The value of total_fruit is %d\n", total_fruit);
    
    return 0;
}
```

### 2.1.1 有符号整数

下表列出了存储有符号整数的所有基本类型

|类型|C标准|Win16|Win32|Unix32/Win64|Unix64|
|:---|:---:|:---:|:----:|:-----:|:-----:|
|`signed char`|$\ge 8$ 位|$8$ 位|$8$ 位|$8$ 位|$8$ 位|$8$ 位|
|||||||
|`signed short int`|$\ge16$ 位|$16$ 位|$16$ 位|$16$ 位|$16$ 位|
|||||||
|`signed int`|$\ge16$ 位|$16$ 位|$32$ 位|$32$ 位|$32$ 位|
|||||||
|`signed long int`|$\ge32$位|$32$ 位|$32$ 位|$32$ 位|$64$ 位|
|||||||
|`signed long long int`|$\ge64$位|$64$位|$64$位|$64$位|$64$位|


类型 `signed char` 在 C 标准中至少占用 $8$ 位，然而，几乎所有的 C 语言实现都将其实现为 $8$ 位。其他类型占用内存取决于具体实现，要求尺寸必须是 `signed char` 类型的整数整数倍

大多数时候，`signed` 修饰符是可选的；如果忽略修饰符，默认情形下是带符号的。`char` 是唯一的例外，它是否带符号取决于编译器具体实现

> [!tip]
>
> 在需要强调某个变量是带符号整数时，一般情况需要带上 `signed` 修饰符

此外，除非是单独的 `int` 类型，`int` 关键字也是可选的。换句话说，`signed`、`signed int` 和 `int` 是完全等价的

> [!tip]
>
> 在计算机世界中，只有整数才区分 **有符号整数** 和 **无符号整数**。因此，`signed` 修饰符一出现，就表明这是一个整数类型，默认情况下就是 `int` 类型

### 2.1.2 无符号整数

当然，有时候不需要存储负数。例如，班级的学生数、人类的年龄等，都是不需要存储负数的。无符号整数类型只需要将修饰符 `signed` 替换为 `unsigned` 即可。每个无符号整数类型都不同于有符号整数类型，但是占用的内存大小相同

|类型|C标准|Win16|Win32|Unix32/Win64|Unix64|
|:---|:---:|:---:|:----:|:-----:|:-----:|
|`unsigned char`|$\ge 8$ 位|$8$ 位|$8$ 位|$8$ 位|$8$ 位|$8$ 位|
|||||||
|`unsigned short int`|$\ge16$ 位|$16$ 位|$16$ 位|$16$ 位|$16$ 位|
|||||||
|`unsigned int`|$\ge16$ 位|$16$ 位|$32$ 位|$32$ 位|$32$ 位|
|||||||
|`unsigned long int`|$\ge32$位|$32$ 位|$32$ 位|$32$ 位|$64$ 位|
|||||||
|`unsigned long long int`|$\ge64$位|$64$位|$64$位|$64$位|$64$位|

### 2.1.3 零值初始化

定义变量时，我们应该将变量进行初始化。然而，并非任何时候都知道变量的初始化。此时，应该选择一个对程序允许没有任何影响的值，$0$ 通常是一个不错的选择。

```c
int counter = 0;
```

> [!tip]
>
> 对于任何基本类型，都可以使用 **零值初始化**。

### 2.1.4 只读变量

有时候，我们希望变量在初始化之后就不在修改，即具有固定值或值不变的变量。在变量定义中使用 `const` 关键字，就可以定义不能修改的变量。这种变量称为 **只读变量**，或 **运行时常量**

```c
const unsigned toe_count {10};
```

关键字 `const` 告诉编译，变量 `toe_count` 不允许修改。任何尝试修改 `toe_count` 的语句都会在编译期间标记为错误。


## 2.2 整型字面值

**字面值** 是直接以具体数据形式（字面意思）书写的固定值，无需变量存储即可使用。它是一种不可更改的常量，如整数 $10$、浮点数 $3.14$、字符 `'A'` 或字符串 `"Hello"`，**直接表示数值本身**

### 2.2.1 十进制整型字面值

在 C 语言中，十进制整数字面值的词法规则如下

```c
["-" "+"]("1" ... "9")("0" .... "9")*["L" "U" "LL" "UL" "ULL"]
[可选符号](非零十进制数码)(十进制数码)*[可选后缀]
```

符号 `-` 和 `+` 决定整数字面值的正负，默认情况下为正数。除开可选的符号外，十进制整数字面值的第一个数码必须为非零数码，随后跟随任意个十进制数码。可选的后缀用于指定字面值的类型


| 后缀  	| 类型          	|
|:-------	|:---------------	|
| `U`   	| `unsigned int`  	|
| `L`   	| `long int`      	|
| `LL`  	| `long long int` 	|
| `UL`      |`unsigned long int`|
| `ULL`     |`unsigned long long int`|

下面列出了一些合法的十进制整数字面值的例子

```c
-123    +123    123    22333    98U    -1234LL    12345ULL     
```

在使用整数字面值初始化变量时，它必须位于变量能类型允许的范围内，否则编译器可能会发出警告

```c
// 符合初始化准则
unsigned long age = 99UL;
unsigned short price = 10;
// 违反初始化准则
unsigned char high = 513U;
unsigned int high = -1;  
```

> [!warning] 
> 
> 对于一个没有后缀的十进制整数字面值，编译器是如何确定其类型的呢？
>
> 编译器按顺序尝试 `int -> long int -> long long int`，直到找到能够存储并且尺寸最小的类型就是该字面值的类型

### 2.2.2 十六进制整型字面值

在 C 语言中，十六进制整数字面值的词法规则如下

```c
["-" "+"] "0" ("x" | "X")("0" .... "9" "A" ... "F")+["L" "U" "LL" "UL" "ULL"]
[可选符号](0x|0X)(十六进制数码)+[可选后缀]
```

下面列出了一些合法的十六进制整数字面值的例子

```c
十六进制字面值:     0x1AF   0x123U  0xAL    0xcad   0xFF
十进制字面值:       431     291U    10L     3245    255
```

十六进制整型字面值主要用于定义位的特定模式。因为每个十六进制数码对应 $4$ 位，所以很容易把位的特定模式表达为十六进制的字面值

例如，程序中表示 RGB 色域中的一个颜色时，常常表示为 $32$ 位字的低 $3$ 字节。白色可以表示 `0xFFFFFF`

### 2.2.3 八进制整型字面值

还可以把整型字面值表示为八进制形式。C 语言中，八进制整数字面值的词法规则如下

```c
["-" "+"] "0" ("0" .... "7")+["L" "U" "LL" "UL" "ULL"]
[可选符号](0)(八进制数码)+[可选后缀]
```

下面列出了八进制整数字面值的例子

```c
八进制字面值:  0657    0443U    012L    06255   0x377
十进制字面值:  431     291U     10L     3245    255
```

### 2.2.4 二进制整型字面值

从 C23 标准开始，整数字面值支持使用二进制形式。其二进制整数字面值的词法规则如下

```c
["-" "+"] "0" ("b" | "B")("0" | "1")+["L" "U" "LL" "UL" "ULL"]
[可选符号](0b|0B)(二进制数码)+[可选后缀]
```

下面列出了二进制整数字面值的例子

```c
二进制字面值:  0B110101111    0b100100011U    01010L
十进制字面值:  431            291U            10L    
```

> [!tip]
>
> 编译器并不在意程序员使用何种形式的字面值，因为这些字面值最终都会转化为相同的位模式存储在内存中。表示整数时使用什么进制取决于是否方便

## 2.3 算术运算

**运算** 是由运算符定义，例如，运算符 `+` 用于相加，`*` 用于相乘。运算符操作的数值称为 **操作数**。**表达式** 就是由操作数与运算符组成序列。例如，表达式 `2 * 3`，操作数是 $2$ 和 $3$，运算符 `*` 需要两个操作数，所以它称为 **二元运算符**。只需要一个操作数的运算符称为 **一元运算符**，例如表达式 `-width`，表示对操作数 `width` 的符号取反

下表列出了可以对整数进行的算术运算

|运算符|描述|
|:----|:---|
|`+`|加法，表达式 `a + b` 的值是两个操作数的和|
|`-`|减法，表达式 `a - b` 的值是两个操作数的差|
|`*`|乘法，表达式 `a * b` 的值是两个操作数的乘积|
|`/`|除法，表达式 `a / b` 的值是两个操作数的商|
|`%`|模运算，表达式 `a % b` 的值等于 `a - (a / b)` |

